{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">ðŸ›’ Your Cart</h2>

{% if items %}
  <table class="table">
    <thead>
      <tr>
        <th>Book Title</th>
        <th>Author</th>
        <th>Quantity</th>
        <th>Price per Book</th>
        <th>Total Price</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.book.title }}</td>
        <td>{{ item.book.author }}</td>
        <td>{{ item.quantity }}</td>
        <td>${{ "%.2f"|format(item.book.price) }}</td>
        <td>${{ "%.2f"|format(item.total_price) }}</td> {# Changed this to use item.total_price property #}
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <h4>Total: ${{ "%.2f"|format(total) }}</h4>

  {# ADD THE CHECKOUT BUTTON HERE #}
  <div class="mt-3 text-right"> {# Use text-right for bootstrap 4/5 to align to right #}
    <a href="{{ url_for('main.checkout') }}" class="btn btn-success btn-lg">Proceed to Checkout</a>
  </div>

{% else %}
  <p>Your cart is empty.</p>
{% endif %}
{% endblock %}